<%- include('partials/header') %>
  <link rel="stylesheet" href="extension.css">

  <!-- Main Content -->
  <div class="main-wrapper" itemscope itemtype="https://schema.org/Person">
    <div class="container">
      <!-- Main Section Title -->
      <div class="section-title">
        <h1 itemprop="name">Extension Activities</h1>
        <div class="title-underline"></div>
      </div>

      <!-- Main Content Grid -->
      <div class="content-grid">
        <% 
        // Group activities by role
        const roleGroups = {};
        
        // Create icon mapping for different roles
        const roleIcons = {
          "Government Advisory Roles": "fas fa-landmark",
          "International Contributions": "fas fa-globe",
          "National Contributions": "fas fa-flag"
        };
        
        activities.forEach(activity => {
          if (!roleGroups[activity.role]) {
            roleGroups[activity.role] = [];
          }
          roleGroups[activity.role].push(activity);
        });
        
        // Sort activities within each role group by serialNumber
        Object.keys(roleGroups).forEach(role => {
          roleGroups[role].sort((a, b) => {
            // Check if serialNumber exists and is a number, if not use 0 as default
            const aSerial = a.serialNumber !== undefined ? Number(a.serialNumber) : 0;
            const bSerial = b.serialNumber !== undefined ? Number(b.serialNumber) : 0;
            return aSerial - bSerial; // Sort in ascending order
          });
        });
        
        // Loop through each role group
        Object.keys(roleGroups).forEach(role => { 
        %>
          <div class="content-card" itemscope itemtype="https://schema.org/Role">
            <div class="card-header">
              <div class="header-icon" aria-hidden="true">
                <i class="<%= roleIcons[role] || 'fas fa-briefcase' %>"></i>
              </div>
              <h2><%= role %></h2>
            </div>
            <div class="card-body">
              <ul class="elegant-list" role="list">
                <% roleGroups[role].forEach(activity => { %>
                  <li itemscope itemtype="https://schema.org/Role" role="listitem">
                    <span class="position-title" itemprop="roleName"><%= activity.title %></span>
                    <span class="position-org" itemprop="organization"><%= activity.description %></span>
                    <% if (activity.location) { %>
                      <span class="position-details" itemprop="location"><%= activity.location %></span>
                    <% } %>
                  </li>
                <% }); %>
              </ul>
            </div>
          </div>
        <% }); %>
      </div>
    </div>
  </div>

  <%- include('partials/footer') %>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Add staggered animation effect to list items
        const listItems = document.querySelectorAll(".elegant-list li");
        listItems.forEach((item, index) => {
          item.style.opacity = "0";
          item.style.transform = "translateY(20px)";
          item.style.transition = "opacity 0.5s ease, transform 0.5s ease";

          setTimeout(() => {
            item.style.opacity = "1";
            item.style.transform = "translateY(0)";
          }, 100 * index);
        });
      });
    </script>