<%- include('partials/header') %>
  <link rel="stylesheet" href="patent.css" />
  <div class="main-wrapper">
    <div class="container">
      <div class="page-title">
        <h1>Patents & Innovations</h1>
        <p class="subtitle">Pioneering Technologies and Groundbreaking Inventions</p>
      </div>
      <div class="profile-links">
      </div>
      <% if (settings.showPatents) { %>
        <!-- Patent Summary -->
        <div class="patent-summary-container">
          <div class="patent-summary">
            <div class="summary-card">
              <div class="summary-icon"><i class="fas fa-award"></i></div>
              <div class="summary-content">
                <div class="summary-number">
                  <%= patents.filter(patent=> patent.grantNumber).length %>
                </div>
                <div class="summary-title">Patents Granted</div>
              </div>
            </div>
            <div class="summary-card">
              <div class="summary-icon"><i class="fas fa-file-alt"></i></div>
              <div class="summary-content">
                <div class="summary-number">
                  <%= patents.filter(patent=> !patent.grantNumber).length %>
                </div>
                <div class="summary-title">Patents Applied</div>
              </div>
            </div>
            <div class="summary-card">
              <div class="summary-icon"><i class="fas fa-exchange-alt"></i></div>
              <div class="summary-content">
                <div class="summary-number"><%= technologyTransfers.length %></div>
                <div class="summary-title">Technology Transfer</div>
              </div>
            </div>
            <div class="summary-card">
              <div class="summary-icon"><i class="fas fa-flask"></i></div>
              <div class="summary-content">
                <div class="summary-number">0</div>
                <div class="summary-title">Translational Works</div>
              </div>
            </div>
          </div>
        </div>
        <% } %>


          <!-- Patents List Section -->
          <div class="patents-section">
            <div class="section-title">
              <h2>Patent Portfolio</h2>
            </div>

            <!-- Search Control -->
            <div class="search-container">
              <input type="text" id="patent-search" placeholder="Search patents..." class="search-input" />
              <button id="search-btn-patents" class="search-button">
                <i class="fas fa-search"></i>
              </button>
            </div>

            <!-- Patent Cards -->
            <div class="patent-cards-container" id="patent-cards">
              <% patents.forEach((patent, index)=> { %>
                <div class="patent-card" data-index="<%= index %>">
                  <div class="patent-card-header">
                    <h3>
                      <%= patent.title %>
                    </h3>
                    <span class="patent-year">
                      <%= patent.year %>
                    </span>
                  </div>
                  <div class="patent-card-body">
                    <p><strong>Inventors:</strong>
                      <%= patent.authors %>
                    </p>
                    <p><strong>Application No.:</strong>
                      <%= patent.applicationNumber %>
                    </p>

                    <% if (patent.filingDate) { %>
                      <p><strong>Filing Date:</strong>
                        <%= patent.filingDate %>
                      </p>
                    <% } %>

                    <% if (patent.publicationDate) { %>
                      <p><strong>Publication Date:</strong>
                        <%= patent.publicationDate %>
                      </p>
                    <% } %>

                    <p class="grantNum"><strong>Grant Number: </strong>
                      <%= patent.grantNumber %>
                    </p>

                    <p class="grantDate"><strong>Grant Date: </strong>
                      <%= patent.grantDate %>
                    </p>

                    <p class="desc" style="display: none;"><strong>Description</strong>
                      <%= patent.description%>
                    </p>
                  </div>
                  <div class="patent-card-footer">
                    <button class="view-details-btn" data-id="<%= index %>">
                      View Details
                    </button>
                  </div>
                </div>
                <% }) %>
            </div>
          </div>
          <br>
          <h2>Technology Transfers</h2>
          <!-- Technology Transfer Section -->
          <div class="technology-transfer-section">
            <% if (technologyTransfers && technologyTransfers.length > 0) { %>
              <% technologyTransfers.forEach((transfer, index) => { %>
                <div class="technology-transfer-content" style="margin-bottom: 30px; padding: 20px; border: 1px solid var(--border-color); border-radius: 8px;">
                  <h3 style="margin: 0 0 15px 0;"><%= transfer.title %></h3>
                  
                  <p style="white-space: pre-line; margin-bottom: 15px;"><%= transfer.description %></p>
                  
                  <div class="transfer-details" style="margin-top: 15px; padding-top: 15px; border-top: 1px solid var(--border-color);">
                    <p><strong>Transferred to:</strong> <%= transfer.transferredTo %></p>
                    <p><strong>Transfer Period:</strong> <%= transfer.transferPeriod %></p>
                  </div>
                </div>
              <% }); %>
            <% } else { %>
              <div class="technology-transfer-content">
                <p style="text-align: center; color: #666; padding: 40px;">No technology transfers available at the moment.</p>
              </div>
            <% } %>
          </div>
    </div>
  </div>
  <!-- Patent Details Modal -->
  <div id="patent-modal" class="modal">
    <div class="modal-content">
      <span class="close-modal">&times;</span>
      <h2 id="modal-title"></h2>
      <div class="modal-info">
        <p><strong>Inventors:</strong> <span id="modal-inventors"></span></p>
        <p><strong>Year:</strong> <span id="modal-year"></span></p>
        <p><strong>Application Number:</strong> <span id="modal-app-number"></span></p>
        <p id="modal-filing-date" style="display: none;"><strong>Filing Date:</strong> <span id="modal-filing-date-value"></span></p>
        <p id="modal-publication-date" style="display: none;"><strong>Publication Date:</strong> <span id="modal-publication-date-value"></span></p>
        <p id="modal-grant-number" style="display: none;"><strong>Grant Number:</strong> <span id="modal-grant-number-value"></span></p>
        <p id="modal-grant-date" style="display: none;"><strong>Grant Date:</strong> <span id="modal-grant-date-value"></span></p>
      </div>
      <div class="modal-description">
        <h3>Description</h3>
        <p id="modal-description"></p>
      </div>
    </div>
  </div>
  <%- include('partials/footer') %>
    <script src="patent.js"></script>